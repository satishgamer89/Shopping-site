<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Business Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body { margin:0;font-family:Arial;background:#f5f5f5 }
header { background:#0a3d62;color:#fff;padding:15px;display:flex;justify-content:space-between }
header a { color:white;margin-left:12px;text-decoration:none }
section { padding:20px }
.products { display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px }
.card { background:#fff;padding:15px;border-radius:6px;box-shadow:0 2px 5px #0002 }
button { padding:8px 12px;border:none;background:#0a3d62;color:white;cursor:pointer }
input,select { padding:8px;width:100%;margin:5px 0 }
.hidden { display:none }
.cart-item { display:flex;justify-content:space-between;margin:8px 0 }
.admin { background:#fff;padding:15px;margin:20px;border-radius:6px }
</style>
</head>

<body>

<header>
  <b>MyStore</b>
  <div>
    <a href="#" onclick="show('home')">Home</a>
    <a href="#" onclick="show('cart')">Cart (<span id="cartCount">0</span>)</a>
    <a href="#" onclick="show('login')">Login</a>
    <a href="#" onclick="show('admin')">Admin</a>
  </div>
</header>

<!---------------- HOME ---------------->
<section id="home">
  <h2>Products</h2>
  <div class="products" id="productList"></div>
</section>

<!---------------- CART ---------------->
<section id="cart" class="hidden">
  <h2>Your Cart</h2>
  <div id="cartItems"></div>
  <h3>Total ₹<span id="total">0</span></h3>

  <input id="couponCode" placeholder="Coupon Code">
  <button onclick="applyCoupon()">Apply Coupon</button>
  <p id="discountText"></p>

  <button onclick="checkout()">Checkout</button>
</section>

<!---------------- LOGIN ---------------->
<section id="login" class="hidden">
  <h2>Customer Login (Demo)</h2>
  <input id="userEmail" placeholder="Email">
  <button onclick="login()">Login</button>
</section>

<!---------------- ADMIN ---------------->
<section id="admin" class="hidden">
  <h2>Admin Panel</h2>

  <div class="admin">
    <h3>Add Coupon</h3>
    <input id="cCode" placeholder="Code">
    <select id="cType">
      <option value="percent">Percent</option>
      <option value="flat">Flat</option>
    </select>
    <input id="cVal" placeholder="Value">
    <button onclick="addCoupon()">Add</button>
  </div>

  <div class="admin">
    <h3>Orders</h3>
    <div id="orders"></div>
  </div>
</section>

<script>
/* ---------- DATA ---------- */
const products = [
  {id:1,name:"Organic Honey",price:499},
  {id:2,name:"Herbal Tea",price:299},
  {id:3,name:"Natural Spice",price:199}
];

let cart = JSON.parse(localStorage.getItem("cart")) || [];
let coupons = JSON.parse(localStorage.getItem("coupons")) || [];
let orders = JSON.parse(localStorage.getItem("orders")) || [];
let user = localStorage.getItem("user");
let discount = 0;

/* ---------- UI ---------- */
function show(id){
  document.querySelectorAll("section").forEach(s=>s.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}

/* ---------- PRODUCTS ---------- */
const list=document.getElementById("productList");
products.forEach(p=>{
  list.innerHTML+=`
  <div class="card">
    <h3>${p.name}</h3>
    <p>₹${p.price}</p>
    <button onclick="addCart(${p.id})">Add to Cart</button>
  </div>`;
});

/* ---------- CART ---------- */
function addCart(id){
  const i=cart.find(x=>x.id===id);
  i?i.qty++:cart.push({id,qty:1});
  saveCart();
}
function saveCart(){
  localStorage.setItem("cart",JSON.stringify(cart));
  renderCart();
}
function renderCart(){
  const box=document.getElementById("cartItems");
  let total=0;box.innerHTML="";
  cart.forEach(c=>{
    const p=products.find(x=>x.id===c.id);
    total+=p.price*c.qty;
    box.innerHTML+=`<div class="cart-item">${p.name} x ${c.qty} <b>₹${p.price*c.qty}</b></div>`;
  });
  document.getElementById("total").innerText=total-discount;
  document.getElementById("cartCount").innerText=cart.length;
}
renderCart();

/* ---------- COUPON ---------- */
function addCoupon(){
  coupons.push({
    code:cCode.value.toUpperCase(),
    type:cType.value,
    value:+cVal.value
  });
  localStorage.setItem("coupons",JSON.stringify(coupons));
  alert("Coupon Added");
}
function applyCoupon(){
  const code=couponCode.value.toUpperCase();
  const c=coupons.find(x=>x.code===code);
  if(!c) return alert("Invalid");
  discount=c.type==="percent"?total()*c.value/100:c.value;
  discountText.innerText="Discount ₹"+discount;
  renderCart();
}
function total(){
  return cart.reduce((s,c)=>s+products.find(p=>p.id===c.id).price*c.qty,0);
}

/* ---------- LOGIN ---------- */
function login(){
  user=userEmail.value;
  localStorage.setItem("user",user);
  alert("Logged in");
  show("cart");
}

/* ---------- CHECKOUT ---------- */
function checkout(){
  if(!user) return alert("Login first");
  const order={
    id:"ORD"+Date.now(),
    user,
    total:total()-discount
  };
  orders.push(order);
  localStorage.setItem("orders",JSON.stringify(orders));

  window.open(`https://wa.me/919999999999?text=Order ${order.id} Total ₹${order.total}`);
  alert("Order placed");
  cart=[];discount=0;saveCart();
}

/* ---------- ADMIN ORDERS ---------- */
function loadOrders(){
  ordersDiv.innerHTML="";
  orders.forEach(o=>{
    ordersDiv.innerHTML+=`<p>${o.id} | ${o.user} | ₹${o.total}</p>`;
  });
}
loadOrders();
</script>

</body>
</html>
